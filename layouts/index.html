{{ define "main" }}
<section class="section container-fluid mt-n3 pb-3">
  <div class="row justify-content-center">
    <div class="col-lg-12 text-center">
      <h1>{{ .Title }}</h1>
    </div>
    <div class="col-lg-9 col-xl-8 text-center">
      <p class="lead">{{ .Params.lead | safeHTML }}</p>
      {{ .Content }}
    </div>
  </div>
</section>

<!-- Featured Posts Section -->
<section>
  <div class="row justify-content-center">
    <div class="col-xl-12 col-xl-12">
<!--      <h2 class="h3 mb-4">Featured Posts</h2> -->

      {{ $featuredPosts := where .Site.RegularPages "Params.homepage" true }}
      {{ if not $featuredPosts }}
        {{ $featuredPosts = first 4 .Site.RegularPages }}
      {{ end }}
      {{ $firstFeatured := index $featuredPosts 0 }}

      {{ if $firstFeatured }}
      <!-- Main Featured Post -->
      <div class="card mb-4">
        <div class="card-body">
          <h3 class="card-title"><a class="text-body" href="{{ $firstFeatured.RelPermalink }}">{{ $firstFeatured.Title }}</a></h3>
          <p class="card-text">{{ $firstFeatured.Summary | safeHTML }}</p>
          {{ partial "main/blog-meta.html" $firstFeatured }}
          <a href="{{ $firstFeatured.RelPermalink }}" class="btn btn-primary mt-2">Read More</a>
        </div>
      </div>

      <!-- Three Square Cards -->
      <div class="row row-cols-1 row-cols-md-3 g-4">
        {{ range first 3 (after 1 $featuredPosts) }}
        <div class="col">
          <div class="card h-100 d-flex flex-column">
            <div class="card-body flex-grow-1">
              <h4 class="card-title h5"><a class="text-body" href="{{ .RelPermalink }}">{{ .Title }}</a></h4>
              <p class="card-text small">{{ .Summary | plainify | truncate 150 }}</p>
            </div>
            <div class="card-footer bg-white mt-auto">
              {{ partial "main/blog-meta.html" . }}
              <a href="{{ .RelPermalink }}" class="btn btn-sm btn-outline-primary mt-2">Read More</a>
            </div>
          </div>
        </div>
        {{ end }}
      </div>
      {{ end }}
    </div>
  </div>
</section>

<style>
  .card.h-100 {
    display: flex;
    flex-direction: column;
  }
  .card-body.flex-grow-1 {
    flex: 1 0 auto;
  }
  .card-footer.mt-auto {
    margin-top: auto;
  }
</style>
{{ end }}

{{ define "sidebar-prefooter" }}
  {{ if site.Params.doks.backgroundDots -}}
  <div class="d-flex justify-content-start">
    <div class="bg-dots"></div>
  </div>
  {{ end -}}
{{ if eq $.Site.Language.LanguageName "English" }}
  <section class="section section-md section-features">
    <div class="container">
      <!-- <div class="row justify-content-center text-center">
        <div class="col-lg-5">
          <h2 class="h4">Update content</h2>
          <p>Edit <code>content/_index.md</code> to see this page change.</p>
        </div>
        <div class="col-lg-5">
          <h2 class="h4">Add new content</h2>
          <p>Add Markdown files to <code>content</code> to create new pages.</p>
        </div>
        <div class="col-lg-5">
          <h2 class="h4">Configure your site</h2>
          <p>Edit your config in <code>config/_default/params.toml</code>.</p>
        </div>
        <div class="col-lg-5">
          <h2 class="h4">Read the docs</h2>
          <p>Learn more in the <a href="https://getdoks.org/">Docs</a>.</p>
        </div> -->
      </div>
    </div>
  </section>
  {{ end }}
{{ end }}

{{ define "sidebar-footer" }}
{{ if site.Params.doks.sectionFooter -}}
<section class="section section-md container-fluid bg-light">
  <div class="row justify-content-center text-center">
    <div class="col-lg-7">
      <h2 class="mt-2">Start building with Doks today</h2>
      <a class="btn btn-primary rounded-pill px-4 my-2" href="/docs/{{ if site.Params.doks.docsVersioning }}{{ site.Params.doks.docsVersion }}/{{ end }}prologue/introduction/" role="button">{{ i18n "get-started" }}</a>
    </div>
  </div>
</section>
{{ end -}}
{{ end }}
